<div class="input" [class.textarea]="textarea" [ngStyle]="optionalStyles">
  <label [class.active]="focused || input">
    {{placeholder}}
    <span *ngIf="optional">&nbsp;(Optional)</span>
  </label>
  <input
    *ngIf="!textarea"
    [(ngModel)]="input"
    alt="{{placeholder}} Input"
    type="{{type}}"
    value="{{input}}"
    (focus)="focused = true"
    (blur)="focused = false; dirty = true"
    (input)="sendValue(input)"
    [attr.maxlength]="maxlength"
    [disabled]="disabled"
    [ngStyle]="inputStyles"
  />
  <textarea
    *ngIf="textarea"
    [(ngModel)]="input"
    name="{{placeholder}}"
    rows="{{rows || 1}}"
    (focus)="focused = true"
    (blur)="focused = false; dirty = true"
    (input)="sendValue(input)"
    [attr.maxlength]="maxlength"
    [disabled]="disabled"
  ></textarea>
  <div *ngIf="hiddenType" class="hidden-type">
    <svg version="1.1" width="24" height="24" viewBox="0 0 48 48"
    *ngIf="type === 'password'" (click)="type = 'text'">
    <path d="M24 9C14 9 5.46 15.22 2 24c3.46 8.78 12 15 22 15 10.01 0 18.54-6.22 22-15-3.46-8.78-11.99-15-22-15zm0 25c-5.52 0-10-4.48-10-10s4.48-10 10-10 10 4.48 10 10-4.48 10-10 10zm0-16c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6z"/>
    </svg>
    <svg version="1.1" width="24" height="24" viewBox="0 0 48 48"
     *ngIf="type === 'text'" (click)="type = 'password'">
      <path d="M24 14c5.52 0 10 4.48 10 10 0 1.29-.26 2.52-.71 3.65l5.85 5.85c3.02-2.52 5.4-5.78 6.87-9.5-3.47-8.78-12-15-22.01-15-2.8 0-5.48.5-7.97 1.4l4.32 4.31c1.13-.44 2.36-.71 3.65-.71zM4 8.55l4.56 4.56.91.91C6.17 16.6 3.56 20.03 2 24c3.46 8.78 12 15 22 15 3.1 0 6.06-.6 8.77-1.69l.85.85L39.45 44 42 41.46 6.55 6 4 8.55zM15.06 19.6l3.09 3.09c-.09.43-.15.86-.15 1.31 0 3.31 2.69 6 6 6 .45 0 .88-.06 1.3-.15l3.09 3.09C27.06 33.6 25.58 34 24 34c-5.52 0-10-4.48-10-10 0-1.58.4-3.06 1.06-4.4zm8.61-1.57l6.3 6.3L30 24c0-3.31-2.69-6-6-6l-.33.03z"/>
    </svg>
  </div>
  <div *ngIf="!optional && !minlength" class="validation-icon">
    <svg version="1.1" height="20" width="20" viewBox="0 0 48 48" *ngIf="input && dirty && !notmatching">
      <path d="M24 4C12.95 4 4 12.95 4 24c0 11.04 8.95 20 20 20 11.04 0 20-8.96 20-20 0-11.05-8.96-20-20-20zm-4 30L10 24l2.83-2.83L20 28.34l15.17-15.17L38 16 20 34z"/>
    </svg>
    <svg version="1.1" height="20" width="20" viewBox="0 0 48 48" *ngIf="(!input && dirty) || notmatching" class="invalid">
      <path d="M22 30h4v4h-4zm0-16h4v12h-4zm1.99-10C12.94 4 4 12.95 4 24s8.94 20 19.99 20S44 35.05 44 24 35.04 4 23.99 4zM24 40c-8.84 0-16-7.16-16-16S15.16 8 24 8s16 7.16 16 16-7.16 16-16 16z"/>
    </svg>
  </div>
  <div *ngIf="!optional && minlength" class="validation-icon">
    <svg version="1.1" height="20" width="20" viewBox="0 0 48 48" *ngIf="input && input.length >= minlength  && dirty">
      <path d="M24 4C12.95 4 4 12.95 4 24c0 11.04 8.95 20 20 20 11.04 0 20-8.96 20-20 0-11.05-8.96-20-20-20zm-4 30L10 24l2.83-2.83L20 28.34l15.17-15.17L38 16 20 34z"/>
    </svg>
    <svg version="1.1" height="20" width="20" viewBox="0 0 48 48" *ngIf="!input && dirty" class="invalid">
      <path d="M22 30h4v4h-4zm0-16h4v12h-4zm1.99-10C12.94 4 4 12.95 4 24s8.94 20 19.99 20S44 35.05 44 24 35.04 4 23.99 4zM24 40c-8.84 0-16-7.16-16-16S15.16 8 24 8s16 7.16 16 16-7.16 16-16 16z"/>
    </svg>
    <svg version="1.1" height="20" width="20" viewBox="0 0 48 48" *ngIf="input && input.length < minlength && dirty" class="invalid">
      <path d="M22 30h4v4h-4zm0-16h4v12h-4zm1.99-10C12.94 4 4 12.95 4 24s8.94 20 19.99 20S44 35.05 44 24 35.04 4 23.99 4zM24 40c-8.84 0-16-7.16-16-16S15.16 8 24 8s16 7.16 16 16-7.16 16-16 16z"/>
    </svg>
  </div>
  <div *ngIf="email" class="validation-icon">
    <svg version="1.1" height="20" width="20" viewBox="0 0 48 48" *ngIf="emailValid && input && dirty">
      <path d="M24 4C12.95 4 4 12.95 4 24c0 11.04 8.95 20 20 20 11.04 0 20-8.96 20-20 0-11.05-8.96-20-20-20zm-4 30L10 24l2.83-2.83L20 28.34l15.17-15.17L38 16 20 34z"/>
    </svg>
    <svg version="1.1" height="20" width="20" viewBox="0 0 48 48" *ngIf="(!emailValid || !input) && dirty" class="invalid">
      <path d="M22 30h4v4h-4zm0-16h4v12h-4zm1.99-10C12.94 4 4 12.95 4 24s8.94 20 19.99 20S44 35.05 44 24 35.04 4 23.99 4zM24 40c-8.84 0-16-7.16-16-16S15.16 8 24 8s16 7.16 16 16-7.16 16-16 16z"/>
    </svg>
  </div>
  <div *ngIf="customRegex" class="validation-icon">
    <svg version="1.1" height="20" width="20" viewBox="0 0 48 48" *ngIf="customRegexValid && input && dirty">
      <path d="M24 4C12.95 4 4 12.95 4 24c0 11.04 8.95 20 20 20 11.04 0 20-8.96 20-20 0-11.05-8.96-20-20-20zm-4 30L10 24l2.83-2.83L20 28.34l15.17-15.17L38 16 20 34z"/>
    </svg>
    <svg version="1.1" height="20" width="20" viewBox="0 0 48 48" *ngIf="(!customRegexValid || !input) && dirty" class="invalid">
      <path d="M22 30h4v4h-4zm0-16h4v12h-4zm1.99-10C12.94 4 4 12.95 4 24s8.94 20 19.99 20S44 35.05 44 24 35.04 4 23.99 4zM24 40c-8.84 0-16-7.16-16-16S15.16 8 24 8s16 7.16 16 16-7.16 16-16 16z"/>
    </svg>
  </div>
  <div *ngIf="description && !input" class="description" [innerHtml]="description"></div>
  <div *ngIf="!optional && !input && dirty" class="error">*{{placeholder}} is a required field</div>
  <div *ngIf="email && !emailValid && dirty" class="error">*{{input}} does not match our email pattern</div>
  <div *ngIf="customRegex && !customRegexValid && dirty" class="error" [innerHtml]="regexMessage || '*does not match the required pattern'"></div>
  <div *ngIf="minlength && input && input.length < minlength && dirty" class="error">*minimum length of {{minlength}}</div>
  <div *ngIf="input && notmatching" class="error">*does not match required field</div>
</div>
